#!/bin/bash

# Version number
VERSION="1.0.2"

# Configuration Directories and Paths
ROOT_CONFIG_DIR="$HOME/.config" 
CONFIG_DIR="$HOME/.config/theme-switch"
THEME_CONF="$CONFIG_DIR/theme.conf"

# Paths to individual theme files
NVIM_THEME="$ROOT_CONFIG_DIR/nvim/lua/config/theme.lua"
KITTY_THEME="$ROOT_CONFIG_DIR/kitty/theme.conf"

# Paths to template files
NVIM_DARK_TEMPLATE="$CONFIG_DIR/templates/nvim-dark"
NVIM_LIGHT_TEMPLATE="$CONFIG_DIR/templates/nvim-light"
KITTY_DARK_TEMPLATE="$CONFIG_DIR/templates/kitty-dark"
KITTY_LIGHT_TEMPLATE="$CONFIG_DIR/templates/kitty-light"

# Function to set the dark theme
set_dark_theme() {
    cp "$NVIM_DARK_TEMPLATE" "$NVIM_THEME"
    cp "$KITTY_DARK_TEMPLATE" "$KITTY_THEME"
    echo "current_theme=dark" > "$THEME_CONF"
    echo "Switched to dark theme."
}

# Function to set the light theme
set_light_theme() {
    cp "$NVIM_LIGHT_TEMPLATE" "$NVIM_THEME"
    cp "$KITTY_LIGHT_TEMPLATE" "$KITTY_THEME"
    echo "current_theme=light" > "$THEME_CONF"
    echo "Switched to light theme."
}

# Function to toggle the theme based on the current setting
toggle_theme() {
    if [ -f "$THEME_CONF" ]; then
        source "$THEME_CONF"
    else
        current_theme="dark"
    fi

    if [ "$current_theme" = "dark" ]; then
        set_light_theme
    else
        set_dark_theme
    fi
}

# Display the version information
show_version() {
    echo "Theme Switcher Script, Version $VERSION"
}

# Main Logic: Parse Command-Line Arguments
case "$1" in
    -v|--version)
        show_version
        ;;
    -t|--toggle)
        toggle_theme
        ;;
    *)
        echo "Usage: $0 [option]"
        echo "Options:"
        echo "  -v, --version    Show the version number"
        echo "  -t, --toggle     Toggle between dark and light themes"
        ;;
esac
